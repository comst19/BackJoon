package Silver;

import java.util.*;

public class S1_2504 {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Scanner sc = new Scanner(System.in);
		String str = sc.next();
		Stack<Character> s = new Stack<>();
		int answer = 0;
		int temp = 1;
		for(char c : str.toCharArray()) {
			if(c == '(' || c == '[') {
				s.push(c);
				if(c == '(') temp *= 2;
				else temp *= 3;
			}
			else {
				if(s.isEmpty()) {
					answer = 0;
					break;
				}else {
					if(c == ')') {
						if(s.isEmpty() || !s.peek().equals('(')) {
							answer = 0;
							break;
						}else {
							answer += temp;
							s.pop();
							temp /= 2;
						}
					}else {
						if(s.isEmpty() || !s.peek().equals(']')) {
							answer = 0;
							break;
						}else {
							answer += temp;
							s.pop();
							temp /= 3;
						}
						
					}
				}
			}
		}
		
		System.out.println(answer);
	}

}
